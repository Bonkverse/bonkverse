{% extends "skins/base.html" %}
{% block content %}

<a href="{% url 'list' %}" class="back-link">â† Back to directory</a>

<div class="server-detail-container">

  <!-- Header -->
  <div class="server-detail-header">
    {% if server.icon_hash %}
      <img
        src="https://cdn.discordapp.com/icons/{{ server.guild_id }}/{{ server.icon_hash }}.png"
        class="server-detail-icon"
        alt="{{ server.name }}"
      >
    {% endif %}

    <div class="server-detail-meta">
      <h1 class="server-detail-title">{{ server.name }}</h1>

      <div class="server-detail-stats">
        ğŸ‘¥ {{ server.member_count }} members
        <span class="dot">â€¢</span>
        ğŸŸ¢ {{ server.online_count }} online
      </div>
    </div>
  </div>

  <!-- Description -->
  <div class="server-detail-description">
    {{ server.description }}
  </div>

{% if server.tags.exists %}
  <div class="server-detail-tags">
    <h3 class="server-detail-section-title">Tags</h3>

    <div class="tags">
      {% for tag in server.tags.all %}
        <span class="tag-bubble">{{ tag.name }}</span>
      {% endfor %}
    </div>
  </div>
{% endif %}


  <!-- Actions -->
  <div class="server-detail-actions">
    <a
      href="{{ server.invite_url }}"
      target="_blank"
      class="discord-button"
    >
      Join Discord
    </a>
  </div>

  <!-- Growth -->
  <div class="server-growth">
    <h2>Member Growth</h2>

    <ul class="snapshot-list">
      {% for s in snapshots %}
        <li>
          <span class="snapshot-date">
            {{ s.recorded_at|date:"M d, H:i" }}
          </span>
          <span class="snapshot-count">
            {{ s.member_count }} members
          </span>
        </li>
      {% endfor %}
    </ul>
  </div>

</div>

{% endblock %}
